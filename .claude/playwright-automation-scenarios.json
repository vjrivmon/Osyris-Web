{
  "osyris_e2e_scenarios": {
    "metadata": {
      "project": "Osyris Scout Management",
      "version": "1.0.0",
      "author": "Vicente - DevOps Training",
      "created": "2025-10-04",
      "description": "Escenarios de automatización E2E para la plataforma Osyris"
    },

    "environments": {
      "local": {
        "frontend_url": "http://localhost:3000",
        "backend_url": "http://localhost:5000",
        "description": "Entorno de desarrollo local"
      },
      "production": {
        "frontend_url": "https://osyris.grupoosyris.es",
        "backend_url": "https://osyris.grupoosyris.es/api",
        "description": "Entorno de producción"
      }
    },

    "test_scenarios": {
      "authentication_flow": {
        "name": "Flujo de Autenticación Completo",
        "priority": "critical",
        "steps": [
          {
            "action": "navigate",
            "target": "${environment.frontend_url}/login",
            "description": "Navegar a la página de login"
          },
          {
            "action": "wait_for_selector",
            "target": "input[name='username'], input[name='email']",
            "timeout": 10000,
            "description": "Esperar que aparezca el campo de usuario"
          },
          {
            "action": "fill",
            "target": "input[name='username'], input[name='email']",
            "value": "${test_credentials.username}",
            "description": "Rellenar campo de usuario"
          },
          {
            "action": "fill", 
            "target": "input[name='password']",
            "value": "${test_credentials.password}",
            "description": "Rellenar campo de contraseña"
          },
          {
            "action": "click",
            "target": "button[type='submit']",
            "description": "Hacer clic en el botón de login"
          },
          {
            "action": "wait_for_navigation",
            "expected_url": "${environment.frontend_url}/dashboard",
            "timeout": 15000,
            "description": "Esperar redirección al dashboard"
          },
          {
            "action": "screenshot",
            "filename": "auth_success_dashboard.png",
            "description": "Capturar pantalla del dashboard tras login"
          }
        ],
        "validation": [
          "URL contains '/dashboard'",
          "Element visible: navigation menu",
          "No error messages displayed"
        ]
      },

      "dashboard_navigation": {
        "name": "Navegación por Dashboard Principal",
        "priority": "high",
        "prerequisite": "authentication_flow",
        "steps": [
          {
            "action": "wait_for_selector",
            "target": "nav, [data-testid='navigation']",
            "description": "Esperar que cargue el menú de navegación"
          },
          {
            "action": "screenshot",
            "filename": "dashboard_overview.png",
            "description": "Capturar vista general del dashboard"
          },
          {
            "action": "click",
            "target": "a[href*='/secciones'], [data-testid='secciones-link']",
            "description": "Navegar a la sección de Secciones"
          },
          {
            "action": "wait_for_load_state",
            "state": "networkidle",
            "description": "Esperar que termine la carga de la página"
          },
          {
            "action": "screenshot",
            "filename": "secciones_page.png",
            "description": "Capturar página de secciones"
          },
          {
            "action": "click",
            "target": "a[href*='/calendario'], [data-testid='calendario-link']",
            "description": "Navegar al calendario"
          },
          {
            "action": "wait_for_load_state",
            "state": "networkidle",
            "description": "Esperar carga del calendario"
          },
          {
            "action": "screenshot",
            "filename": "calendario_page.png",
            "description": "Capturar página del calendario"
          }
        ],
        "validation": [
          "All navigation links are clickable",
          "Pages load without errors",
          "Responsive design works correctly"
        ]
      },

      "admin_panel_access": {
        "name": "Acceso al Panel de Administración",
        "priority": "critical",
        "prerequisite": "authentication_flow",
        "steps": [
          {
            "action": "navigate",
            "target": "${environment.frontend_url}/admin",
            "description": "Navegar al panel de administración"
          },
          {
            "action": "wait_for_selector",
            "target": ".admin-panel, [data-testid='admin-panel']",
            "timeout": 10000,
            "description": "Esperar que cargue el panel de admin"
          },
          {
            "action": "screenshot",
            "filename": "admin_panel.png",
            "description": "Capturar panel de administración"
          },
          {
            "action": "check_console_errors",
            "description": "Verificar que no hay errores en consola"
          }
        ],
        "validation": [
          "Admin panel loads successfully",
          "User has proper permissions",
          "No console errors present"
        ]
      },

      "responsive_design_test": {
        "name": "Prueba de Diseño Responsivo",
        "priority": "medium",
        "steps": [
          {
            "action": "set_viewport_size",
            "width": 1920,
            "height": 1080,
            "description": "Configurar resolución desktop"
          },
          {
            "action": "navigate",
            "target": "${environment.frontend_url}",
            "description": "Navegar a la página principal"
          },
          {
            "action": "screenshot",
            "filename": "desktop_1920x1080.png",
            "description": "Capturar vista desktop"
          },
          {
            "action": "set_viewport_size",
            "width": 768,
            "height": 1024,
            "description": "Configurar resolución tablet"
          },
          {
            "action": "screenshot",
            "filename": "tablet_768x1024.png",
            "description": "Capturar vista tablet"
          },
          {
            "action": "set_viewport_size",
            "width": 375,
            "height": 667,
            "description": "Configurar resolución móvil"
          },
          {
            "action": "screenshot",
            "filename": "mobile_375x667.png",
            "description": "Capturar vista móvil"
          }
        ],
        "validation": [
          "Layout adapts correctly to different screen sizes",
          "Navigation menu is accessible on all devices",
          "Text remains readable at all resolutions"
        ]
      },

      "form_validation_test": {
        "name": "Validación de Formularios",
        "priority": "high",
        "steps": [
          {
            "action": "navigate",
            "target": "${environment.frontend_url}/contacto",
            "description": "Navegar al formulario de contacto"
          },
          {
            "action": "click",
            "target": "button[type='submit']",
            "description": "Intentar enviar formulario vacío"
          },
          {
            "action": "wait_for_selector",
            "target": ".error-message, [data-testid='error']",
            "description": "Esperar mensajes de validación"
          },
          {
            "action": "screenshot",
            "filename": "form_validation_errors.png",
            "description": "Capturar errores de validación"
          },
          {
            "action": "fill",
            "target": "input[name='name']",
            "value": "Test Usuario",
            "description": "Rellenar campo nombre"
          },
          {
            "action": "fill",
            "target": "input[name='email']",
            "value": "test@example.com",
            "description": "Rellenar campo email"
          },
          {
            "action": "fill",
            "target": "textarea[name='message']",
            "value": "Mensaje de prueba para validación de formulario",
            "description": "Rellenar campo mensaje"
          },
          {
            "action": "screenshot",
            "filename": "form_filled.png",
            "description": "Capturar formulario completo"
          }
        ],
        "validation": [
          "Required field validation works",
          "Email format validation works",
          "Success message appears after valid submission"
        ]
      },

      "performance_audit": {
        "name": "Auditoría de Rendimiento",
        "priority": "medium",
        "steps": [
          {
            "action": "navigate",
            "target": "${environment.frontend_url}",
            "description": "Navegar a la página principal"
          },
          {
            "action": "wait_for_load_state",
            "state": "networkidle",
            "description": "Esperar carga completa"
          },
          {
            "action": "measure_performance",
            "metrics": [
              "first_contentful_paint",
              "largest_contentful_paint", 
              "cumulative_layout_shift",
              "total_blocking_time"
            ],
            "description": "Medir métricas de rendimiento"
          },
          {
            "action": "check_network_requests",
            "description": "Analizar peticiones de red"
          },
          {
            "action": "screenshot",
            "filename": "performance_audit.png",
            "description": "Capturar estado final"
          }
        ],
        "validation": [
          "First Contentful Paint < 2s",
          "Largest Contentful Paint < 4s",
          "Cumulative Layout Shift < 0.1",
          "No failed network requests"
        ]
      }
    },

    "test_data": {
      "test_credentials": {
        "username": "admin@osyris.test",
        "password": "TestPassword123!"
      },
      "test_user_data": {
        "name": "Usuario Test",
        "email": "test@osyris.test",
        "section": "Castores"
      }
    },

    "execution_settings": {
      "default_timeout": 30000,
      "retry_attempts": 2,
      "screenshot_on_failure": true,
      "video_recording": false,
      "trace_collection": true,
      "parallel_execution": false
    }
  }
}
